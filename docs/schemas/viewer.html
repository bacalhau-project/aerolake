<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schema Viewer - Wind Turbine Sensor Data</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --success: #16a34a;
            --warning: #ea580c;
            --error: #dc2626;
            --bg: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --border: #e2e8f0;
            --text: #1e293b;
            --text-muted: #64748b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg-secondary);
        }
        
        .header {
            background: var(--bg);
            border-bottom: 2px solid var(--primary);
            padding: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 {
            font-size: 1.8em;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .nav-links {
            display: flex;
            gap: 15px;
        }
        
        .nav-links a {
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.95em;
            transition: background 0.2s;
        }
        
        .nav-links a:hover {
            background: var(--primary-dark);
        }
        
        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }
        
        .sidebar {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .sidebar h2 {
            font-size: 1.2em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }
        
        .toc-item {
            padding: 8px 12px;
            margin: 5px 0;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.2s;
            font-size: 0.95em;
        }
        
        .toc-item:hover {
            background: var(--bg-secondary);
        }
        
        .toc-item.active {
            background: var(--primary);
            color: white;
        }
        
        .main-content {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 30px;
        }
        
        .schema-section {
            margin-bottom: 40px;
        }
        
        .schema-section h2 {
            font-size: 1.5em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
            color: var(--text);
        }
        
        .property-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .property-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .property-name {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            font-weight: 600;
            color: var(--primary);
        }
        
        .property-badges {
            display: flex;
            gap: 8px;
        }
        
        .badge {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 500;
        }
        
        .badge-required {
            background: var(--error);
            color: white;
        }
        
        .badge-optional {
            background: var(--text-muted);
            color: white;
        }
        
        .badge-type {
            background: var(--primary);
            color: white;
        }
        
        .property-description {
            color: var(--text-muted);
            margin-bottom: 10px;
        }
        
        .property-constraints {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .constraint {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.9em;
            color: var(--text);
        }
        
        .validation-rule {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .validation-rule h4 {
            color: var(--warning);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .code-block {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 15px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .example-valid {
            background: #dcfce7;
            border: 1px solid var(--success);
        }
        
        .example-invalid {
            background: #fee2e2;
            border: 1px solid var(--error);
        }
        
        .metadata-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .metadata-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
        }
        
        .metadata-item h4 {
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            color: var(--text-muted);
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
            }
        }
        
        .download-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 20px;
            margin-top: 30px;
            text-align: center;
        }
        
        .download-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background 0.2s;
        }
        
        .btn:hover {
            background: var(--primary-dark);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <h1>
                <span>üìã</span>
                Wind Turbine Schema Viewer v1.0.0
            </h1>
            <nav class="nav-links">
                <a href="https://aerolake.org/">Home</a>
                <a href="https://aerolake.org/schemas/">Schema Docs</a>
                <a href="https://github.com/aerolake/databricks-wind-turbines">GitHub</a>
            </nav>
        </div>
    </header>
    
    <div class="container">
        <aside class="sidebar">
            <h2>Table of Contents</h2>
            <div class="toc-item active" onclick="scrollToSection('overview')">Overview</div>
            <div class="toc-item" onclick="scrollToSection('required')">Required Fields</div>
            <div class="toc-item" onclick="scrollToSection('optional')">Optional Fields</div>
            <div class="toc-item" onclick="scrollToSection('metadata')">Pipeline Metadata</div>
            <div class="toc-item" onclick="scrollToSection('validation')">Validation Rules</div>
            <div class="toc-item" onclick="scrollToSection('examples')">Examples</div>
            <div class="toc-item" onclick="scrollToSection('download')">Download</div>
        </aside>
        
        <main class="main-content">
            <section id="overview" class="schema-section">
                <h2>Schema Overview</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">8</div>
                        <div class="stat-label">Required Fields</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">11</div>
                        <div class="stat-label">Optional Fields</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">6</div>
                        <div class="stat-label">Metadata Fields</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">3</div>
                        <div class="stat-label">Business Rules</div>
                    </div>
                </div>
                
                <p>This JSON Schema defines the structure and validation rules for wind turbine sensor telemetry data. 
                It includes environmental readings, operational metrics, and pipeline processing metadata for complete audit trails.</p>
                
                <div class="code-block">
<pre>{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://aerolake.org/schemas/wind-turbine-v1.json",
  "title": "Wind Turbine Sensor Data",
  "version": "1.0.0"
}</pre>
                </div>
            </section>
            
            <section id="required" class="schema-section">
                <h2>Required Fields</h2>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">timestamp</span>
                        <div class="property-badges">
                            <span class="badge badge-required">REQUIRED</span>
                            <span class="badge badge-type">string</span>
                        </div>
                    </div>
                    <div class="property-description">ISO 8601 timestamp of the sensor reading</div>
                    <div class="property-constraints">
                        <span class="constraint">format: date-time</span>
                        <span class="constraint">example: "2024-01-01T12:00:00Z"</span>
                    </div>
                </div>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">turbine_id</span>
                        <div class="property-badges">
                            <span class="badge badge-required">REQUIRED</span>
                            <span class="badge badge-type">string</span>
                        </div>
                    </div>
                    <div class="property-description">Unique identifier for the wind turbine</div>
                    <div class="property-constraints">
                        <span class="constraint">pattern: ^WT-[0-9]{4}$</span>
                        <span class="constraint">example: "WT-0001"</span>
                    </div>
                </div>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">site_id</span>
                        <div class="property-badges">
                            <span class="badge badge-required">REQUIRED</span>
                            <span class="badge badge-type">string</span>
                        </div>
                    </div>
                    <div class="property-description">Site location identifier</div>
                    <div class="property-constraints">
                        <span class="constraint">pattern: ^SITE-[A-Z]{3}$</span>
                        <span class="constraint">example: "SITE-TEX"</span>
                    </div>
                </div>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">temperature</span>
                        <div class="property-badges">
                            <span class="badge badge-required">REQUIRED</span>
                            <span class="badge badge-type">number</span>
                        </div>
                    </div>
                    <div class="property-description">Ambient temperature in Celsius</div>
                    <div class="property-constraints">
                        <span class="constraint">min: -50</span>
                        <span class="constraint">max: 60</span>
                        <span class="constraint">unit: ¬∞C</span>
                    </div>
                </div>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">humidity</span>
                        <div class="property-badges">
                            <span class="badge badge-required">REQUIRED</span>
                            <span class="badge badge-type">number</span>
                        </div>
                    </div>
                    <div class="property-description">Relative humidity percentage</div>
                    <div class="property-constraints">
                        <span class="constraint">min: 0</span>
                        <span class="constraint">max: 100</span>
                        <span class="constraint">unit: %</span>
                    </div>
                </div>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">pressure</span>
                        <div class="property-badges">
                            <span class="badge badge-required">REQUIRED</span>
                            <span class="badge badge-type">number</span>
                        </div>
                    </div>
                    <div class="property-description">Atmospheric pressure</div>
                    <div class="property-constraints">
                        <span class="constraint">min: 800</span>
                        <span class="constraint">max: 1100</span>
                        <span class="constraint">unit: hPa</span>
                    </div>
                </div>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">wind_speed</span>
                        <div class="property-badges">
                            <span class="badge badge-required">REQUIRED</span>
                            <span class="badge badge-type">number</span>
                        </div>
                    </div>
                    <div class="property-description">Wind speed measurement</div>
                    <div class="property-constraints">
                        <span class="constraint">min: 0</span>
                        <span class="constraint">max: 50</span>
                        <span class="constraint">unit: m/s</span>
                    </div>
                </div>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">power_output</span>
                        <div class="property-badges">
                            <span class="badge badge-required">REQUIRED</span>
                            <span class="badge badge-type">number</span>
                        </div>
                    </div>
                    <div class="property-description">Current power generation</div>
                    <div class="property-constraints">
                        <span class="constraint">min: 0</span>
                        <span class="constraint">max: 5000</span>
                        <span class="constraint">unit: kW</span>
                    </div>
                </div>
            </section>
            
            <section id="optional" class="schema-section">
                <h2>Optional Fields</h2>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">rotation_speed</span>
                        <div class="property-badges">
                            <span class="badge badge-optional">OPTIONAL</span>
                            <span class="badge badge-type">number</span>
                        </div>
                    </div>
                    <div class="property-description">Rotor rotation speed</div>
                    <div class="property-constraints">
                        <span class="constraint">min: 0</span>
                        <span class="constraint">max: 30</span>
                        <span class="constraint">unit: RPM</span>
                    </div>
                </div>
                
                <div class="property-card">
                    <div class="property-header">
                        <span class="property-name">vibration_x / vibration_y / vibration_z</span>
                        <div class="property-badges">
                            <span class="badge badge-optional">OPTIONAL</span>
                            <span class="badge badge-type">number</span>
                        </div>
                    </div>
                    <div class="property-description">3-axis vibration measurements</div>
                    <div class="property-constraints">
                        <span class="constraint">min: 0</span>
                        <span class="constraint">max: 100</span>
                        <span class="constraint">unit: mm/s</span>
                    </div>
                </div>
            </section>
            
            <section id="metadata" class="schema-section">
                <h2>Pipeline Metadata</h2>
                
                <p>Every processed record includes comprehensive metadata for audit trails and data lineage:</p>
                
                <div class="metadata-grid">
                    <div class="metadata-item">
                        <h4>pipeline_version</h4>
                        <p>Version of the processing pipeline (e.g., "1.0.0")</p>
                    </div>
                    <div class="metadata-item">
                        <h4>pipeline_stage</h4>
                        <p>Processing stage: raw, schematized, validated, aggregated, or anomaly</p>
                    </div>
                    <div class="metadata-item">
                        <h4>processing_timestamp</h4>
                        <p>ISO 8601 timestamp of when the record was processed</p>
                    </div>
                    <div class="metadata-item">
                        <h4>git_sha</h4>
                        <p>40-character Git commit hash of the pipeline code</p>
                    </div>
                    <div class="metadata-item">
                        <h4>node_id</h4>
                        <p>Identifier of the processing node</p>
                    </div>
                    <div class="metadata-item">
                        <h4>transformation_hash</h4>
                        <p>SHA256 hash of transformation logic for reproducibility</p>
                    </div>
                </div>
            </section>
            
            <section id="validation" class="schema-section">
                <h2>Business Validation Rules</h2>
                
                <div class="validation-rule">
                    <h4>‚ö° Minimum Wind for Rotation</h4>
                    <p>Turbine rotation requires a minimum wind speed of 3 m/s. If rotation_speed > 0, then wind_speed must be ‚â• 3.</p>
                </div>
                
                <div class="validation-rule">
                    <h4>üõ°Ô∏è High Wind Safety Limit</h4>
                    <p>For safety, when wind speed exceeds 25 m/s, rotation speed must be limited to ‚â§ 20 RPM.</p>
                </div>
                
                <div class="validation-rule">
                    <h4>‚öôÔ∏è Power Generation Requirements</h4>
                    <p>Significant power generation (> 100 kW) requires sufficient wind speed (‚â• 5 m/s).</p>
                </div>
            </section>
            
            <section id="examples" class="schema-section">
                <h2>Examples</h2>
                
                <h3>Valid Example</h3>
                <div class="code-block example-valid">
<pre>{
  "timestamp": "2024-01-01T12:00:00Z",
  "turbine_id": "WT-0001",
  "site_id": "SITE-TEX",
  "temperature": 25.5,
  "humidity": 65,
  "pressure": 1013.25,
  "wind_speed": 12.5,
  "power_output": 2500,
  "rotation_speed": 18,
  "pipeline_metadata": {
    "pipeline_version": "1.0.0",
    "pipeline_stage": "validated",
    "processing_timestamp": "2024-01-01T12:00:05Z",
    "git_sha": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0",
    "node_id": "node-001",
    "transformation_hash": "sha256_hash_here..."
  }
}</pre>
                </div>
                
                <h3>Invalid Example (violates business rule)</h3>
                <div class="code-block example-invalid">
<pre>{
  "timestamp": "2024-01-01T12:00:00Z",
  "turbine_id": "WT-0001",
  "site_id": "SITE-TEX",
  "temperature": 25.5,
  "humidity": 65,
  "pressure": 1013.25,
  "wind_speed": 2.0,  // ‚ùå Too low for rotation
  "power_output": 100,
  "rotation_speed": 15  // ‚ùå Rotation without sufficient wind
}</pre>
                </div>
            </section>
            
            <section id="download" class="schema-section">
                <div class="download-section">
                    <h2>Download & Integration</h2>
                    <p>Get the schema for your validation pipeline</p>
                    
                    <div class="download-buttons">
                        <a href="https://aerolake.org/schemas/wind-turbine-v1.json" class="btn">
                            üìÑ View Raw JSON
                        </a>
                        <a href="https://aerolake.org/schemas/wind-turbine-v1.json" download class="btn">
                            ‚¨áÔ∏è Download Schema
                        </a>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <p><strong>Direct URL for programmatic access:</strong></p>
                        <div class="code-block">
                            <code>https://aerolake.org/schemas/wind-turbine-v1.json</code>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <script>
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
            
            // Update active state
            document.querySelectorAll('.toc-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }
    </script>
</body>
</html>