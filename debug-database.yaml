name: debug-database-location
type: batch
count: 1

tasks:
  - name: check-database
    engine:
      type: docker  
      params:
        image: ghcr.io/bacalhau-project/pipeline-manager:v1.21.0
        entrypoint: ["/bin/bash"]
        parameters:
          - -c
          - |
            echo "=== Check current pipeline state ==="
            cd /app
            PYTHONPATH=/app python pipeline_controller.py --config-db /bacalhau_data/state/pipeline_config.db get
            
            echo "=== Check history ==="
            cd /app  
            PYTHONPATH=/app python pipeline_controller.py --config-db /bacalhau_data/state/pipeline_config.db history
    inputSources:
      - source:
          type: localDirectory
          params:
            sourcePath: /bacalhau_data
            readWrite: false
        target: /bacalhau_data